<style>
  .grid {
    display: grid;
    /* each column is at least 150px, grows to fill space */
    grid-template-columns:  repeat(auto-fit, minmax(500px, 1fr));
    gap: 1rem; /* space between items */
    justify-items: center;
  }
  .grid > div {
    background: #000000;
    border: 1px solid #ccc;
    padding: 1rem;
    text-align: center;
    border-radius: 8px;
  }
  h1 {
    margin-bottom: 0.05em;
    max-width: 500px;
  }
  p {
    margin-top: 0;
    max-width: 500px;
  }

.iframe-wrapper {
  position: relative;
  width: 500px;
  height: 500px;
  overflow: hidden;
  border: 1px solid #ccc;
}

.iframe-placeholder {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.iframe-play {
  font-size: 1.5em;
  background: rgba(255, 255, 255, 0.85);
  border: none;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  cursor: pointer;
  transition: background 0.2s;
}

.iframe-play:hover {
  background: rgba(255, 255, 255, 1);
}

iframe[data-delayed] {
  display: none;
}

</style>

<h1>2D Desmos graphs</h1>
<div class="grid">
  <div>{% include desmos/2d_graphs/orange_cat.html %}</div>
  <div>{% include desmos/2d_graphs/pizza.html %}</div>
  <div>{% include desmos/2d_graphs/watermelon.html %}</div>
  <div>{% include desmos/2d_graphs/loading_bar.html %}</div>
  <div>{% include desmos/2d_graphs/diamond.html %}</div>
  <div>{% include desmos/2d_graphs/google_chrome.html %}</div>
  <div>{% include desmos/2d_graphs/key.html %}</div>
  <div>{% include desmos/2d_graphs/music_note.html %}</div>
  <div>{% include desmos/2d_graphs/package.html %}</div>
  <div>{% include desmos/2d_graphs/rainbow.html %}</div>
  <div>{% include desmos/2d_graphs/rocket.html %}</div>
  <div>{% include desmos/2d_graphs/taco.html %}</div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("iframe").forEach(iframe => {
    if (iframe.closest(".iframe-wrapper")) return; // already handled

    const src = iframe.src;
    iframe.removeAttribute("src");
    iframe.dataset.src = src;
    iframe.dataset.delayed = "true";

    // Fixed size
    iframe.width = 500;
    iframe.height = 500;

    // Pick preview image:
    // Option 1 — from iframe[data-preview] (if you can add it in HTML)
    // Option 2 — set by URL pattern (below)
    let preview = iframe.dataset.preview;

    // Default fallback image
    if (!preview) preview = "{{ 'assets/images/favicon.ico' | absolute_url }}"; // <- change this to your default

    // Create wrapper and placeholder
    const wrapper = document.createElement("div");
    wrapper.className = "iframe-wrapper";

    const placeholder = document.createElement("div");
    placeholder.className = "iframe-placeholder";
    placeholder.style.backgroundImage = `url('${preview}')`;

    const button = document.createElement("button");
    button.className = "iframe-play";
    button.textContent = "▶";

    placeholder.appendChild(button);
    iframe.parentNode.insertBefore(wrapper, iframe);
    wrapper.appendChild(placeholder);
    wrapper.appendChild(iframe);

    // Load iframe on click
    placeholder.addEventListener("click", () => {
      iframe.src = iframe.dataset.src;
      iframe.removeAttribute("data-delayed");
      placeholder.remove();
      iframe.style.display = "block";
    });
  });
});
</script>
